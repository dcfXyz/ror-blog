<div class="panel panel-default">
  <div class="panel-heading">add comment</div>
  <div class="panel-body">
      <ul class="nav nav-tabs">
        <li class="active edit">
          <a href="#" data-toggle="tab">edit</a>
        </li>
        <li class="preview">
          <a href="#" data-toggle="tab">view</a>
        </li>
      </ul>
      <div class="col-lg-12">
        <div id="edit" class="tab-pane active">
          <%= form_for([@post, @post.comments.build], html: {class: "form-horizontal", role: "form"}) do |f| %>
            <div class="form-group">
              <%= f.text_area :body, id: "page_body", class: "form-control", placeholder: "comment" %>
              <div id="preview" style="display: none">
                <div class="well well-lg">
                  <p>view</p>
                </div>
              </div>
            </div>
            <div class="form-group">
              <%= f.submit %>
            </div>
          <% end %>
        </div>
      </div>

      <script>
        $('.preview').click(function() {
            $('#page_body').hide()
            $('#preview').show()
            $('#preview div').html('<p>loading...<p>')
            $.post('/markdown', {body: $('#page_body').val()}, function(data)
            {
                $('#preview div').html(data.md2html)
            })
        })
        $('.edit').click(function() {
            $('#page_body').show()
            $('#preview').hide()
        })
      </script>

  </div>
</div>
